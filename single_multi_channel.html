<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Single/Multi-Channel Mode &mdash; Sensirion I²C Python Driver 1.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=292eb321"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Error Handling" href="error_handling.html" />
    <link rel="prev" title="Transceivers" href="transceivers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Sensirion I²C Python Driver
          </a>
              <div class="version">
                1.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="transceivers.html">Transceivers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Single/Multi-Channel Mode</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#single-channel">Single Channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multi-channel">Multi Channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#choose-mode">Choose Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#determine-mode">Determine Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="error_handling.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging_debugging.html">Logging / Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="device_driver_guidelines.html">Device Driver Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Sensirion I²C Python Driver</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Single/Multi-Channel Mode</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/single_multi_channel.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="single-multi-channel-mode">
<span id="id1"></span><h1>Single/Multi-Channel Mode<a class="headerlink" href="#single-multi-channel-mode" title="Link to this heading"></a></h1>
<p>This driver (particularly
<code class="xref py py-class docutils literal notranslate"><span class="pre">I2cConnection</span></code> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">I2cDevice</span></code>) supports two different
modes of operation: single channel and multi channel.</p>
<section id="single-channel">
<span id="single-channel-mode"></span><h2>Single Channel<a class="headerlink" href="#single-channel" title="Link to this heading"></a></h2>
<p>This mode allows to communicate with a single I²C bus at a time, which is the
typical use-case. In this mode, the method
<code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code> of
<code class="xref py py-class docutils literal notranslate"><span class="pre">I2cConnection</span></code> returns directly the
interpreted response (e.g. a <cite>float</cite>) of the executed command if the operation
was successful, or raise an exception in case of an error (NACK, timeout, …).</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">MyI2cDevice</span><span class="p">(</span><span class="n">I2cConnection</span><span class="p">(</span><span class="n">some_single_channel_transceiver</span><span class="p">))</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get_serial_number</span><span class="p">()</span>  <span class="c1"># command returning a string</span>

<span class="c1"># result contains e.g. &quot;BEEF&quot;</span>
</pre></div>
</div>
</section>
<section id="multi-channel">
<span id="multi-channel-mode"></span><h2>Multi Channel<a class="headerlink" href="#multi-channel" title="Link to this heading"></a></h2>
<p>In this mode, communication is done concurrently on multiple I²C buses. At
Sensirion this is often used to execute measurements on multiple sensors at
the same time. In this mode, the method
<code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code> of
<code class="xref py py-class docutils literal notranslate"><span class="pre">I2cConnection</span></code> returns a list
containing the results for each channel. Each result is either the interpreted
response of the executed command (if successful), or an exception object (in
case of an error).</p>
<p><strong>In contrast to the single channel mode, no exception is raised in case of
I²C errors!</strong> This way you still get the results from successful channels if
errors occurred on some of the channels, but you’ll have to check the results
by yourself. Especially for commands which do not return any data, you still
have to check the returned results to ensure the commands were executed
successfully.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Even though the mentioned methods will not raise an exception in
case of I²C errors, they may still raise an exception if for some
reason the commands could not be executed at all, for example if the
I²C transceiver got disconnected from the computer.</p>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">MyI2cDevice</span><span class="p">(</span><span class="n">I2cConnection</span><span class="p">(</span><span class="n">some_multi_channel_transceiver</span><span class="p">))</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get_serial_number</span><span class="p">()</span>  <span class="c1"># command returning a string</span>

<span class="c1"># result contains e.g. [&quot;DEAD&quot;, &quot;BEEF&quot;, I2cTimeoutError()]</span>
<span class="c1">#  -&gt; read serial number from I²C bus 0: &quot;DEAD&quot;</span>
<span class="c1">#  -&gt; read serial number from I²C bus 1: &quot;BEEF&quot;</span>
<span class="c1">#  -&gt; read serial number from I²C bus 2 failed with timeout error</span>
</pre></div>
</div>
</section>
<section id="choose-mode">
<h2>Choose Mode<a class="headerlink" href="#choose-mode" title="Link to this heading"></a></h2>
<p>Which mode is used depends on the underlying
<a class="reference internal" href="transceivers.html#transceivers"><span class="std std-ref">I²C transceiver</span></a>. A multi channel transceiver will activate
the multi channel mode, and a single channel transceiver will activate the
single channel mode.</p>
<p>But in some cases it might be easier to always have the same API, independent
of whether a multi- or single channel transceiver is used. Then you can
enforce to always use multi channel responses with the property
<code class="xref py py-attr docutils literal notranslate"><span class="pre">always_multi_channel_response</span></code>
of <code class="xref py py-class docutils literal notranslate"><span class="pre">I2cConnection</span></code>. For single
channel transceivers, the result will then always be a list containing one
item. The behavior of multi channel transceivers is not affected by this
property.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">I2cConnection</span><span class="p">(</span><span class="n">some_single_channel_transceiver</span><span class="p">)</span>
<span class="n">connection</span><span class="o">.</span><span class="n">always_multi_channel_response</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># &lt;-- here</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">MyI2cDevice</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">get_serial_number</span><span class="p">()</span>  <span class="c1"># command returning a string</span>

<span class="c1"># result contains e.g. [&#39;BEEF&#39;]</span>
</pre></div>
</div>
</section>
<section id="determine-mode">
<h2>Determine Mode<a class="headerlink" href="#determine-mode" title="Link to this heading"></a></h2>
<p>To determine whether an
<code class="xref py py-class docutils literal notranslate"><span class="pre">I2cConnection</span></code> is in single channel
or multi channel mode, the property
<code class="xref py py-attr docutils literal notranslate"><span class="pre">is_multi_channel</span></code>
can be read. On a <code class="xref py py-class docutils literal notranslate"><span class="pre">I2cDevice</span></code> object,
it can be read as following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">MyI2cDevice</span><span class="p">(</span><span class="n">I2cConnection</span><span class="p">(</span><span class="n">transceiver</span><span class="p">))</span>
<span class="n">multi_channel</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">is_multi_channel</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="transceivers.html" class="btn btn-neutral float-left" title="Transceivers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="error_handling.html" class="btn btn-neutral float-right" title="Error Handling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 Sensirion AG, Switzerland.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>